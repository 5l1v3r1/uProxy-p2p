{
  "name": "uproxy-metrics",
  "version": "1.0.0",
  "description": "Metrics server for uProxy",
  "main": "metrics_server/server.js",
  "dependencies": {
    "body-parser": "^1.15.2",
    "csv-parse": "^1.1.7",
    "express": "^4.14.0",
    "gcloud": "^0.37.0"
  },
  "devDependencies": {
    "jasmine": "^2.4.1",
    "typescript": "^1.8.10",
    "typings": "^1.3.2"
  },
  "//": "For start-datastore, see https://cloud.google.com/datastore/docs/tools/datastore-emulator",
  "scripts": {
    "build": "mkdir -p ./out && npm run ts-compile && cp metrics_server/app.yaml out/metrics_server/ && cp package.json out/",
    "test": "JASMINE_CONFIG_PATH=jasmine.json jasmine",
    "clean": "rm -rf ./node_modules ./out ./typings",
    "ts-compile": "tsc",
    "package-json-copy": "cp package.json out",
    "record-use-build": "npm run ts-compile && npm run package-json-copy",
    "record-use-deploy": "gcloud alpha functions deploy --bucket uproxy-metrics-users-dev --trigger-http --source out recordUse",
    "env": "env",
    "datastore-start": "gcloud beta emulators datastore start --project=uproxy-metrics --no-legacy --no-store-on-disk --host-port=localhost:8081",
    "datastore-load": "DATASTORE_EMULATOR_HOST=127.0.0.1:8081 node out/tools/datastore_load_sample.js",
    "datastore-report": "DATASTORE_EMULATOR_HOST=127.0.0.1:8081 node out/tools/generate_report.js",
    "use-repository-test": "DATASTORE_EMULATOR_HOST=127.0.0.1:8081 node out/adaptors/datastore_use_events_repository_test.js",
    "start-dev": "DATASTORE_EMULATOR_HOST=127.0.0.1:8081 PORT=8080 node out/metrics_server/server.js",
    "start": "node metrics_server/server.js",
    "monitor": "DATASTORE_EMULATOR_HOST=127.0.0.1:8081 nodemon out/metrics_server/server.js",
    "deploy": "cd out && cp metrics_server/app.yaml . && gcloud --project=uproxy-metrics app deploy"
  },
  "engines": {
    "node": ">=4"
  },
  "author": "uProxy"
}
