<link rel="import" href="/third_party/bower/paper-button/paper-button.html">

<polymer-element name='uproxy-metrics-choice-view' constructor='MetricsChoiceView'>
  <template>
    <h1>Metrics Choice</h1>
    <paper-button on-click='{{handleBack_}}'>{{'BACK' | msg}}</paper-button>
    <paper-button on-click='{{handleOptIn_}}'>Share</paper-button>
    <paper-button on-click='{{handleOptOut_}}'>Opt-out</paper-button>
  </template>

  <script>
    Polymer({
      // Public methods
      msg: function(msg_id) { return msg_id; },
      onDone: function(handler) {
        this.addEventListener('done', handler);
      },
      onMetricsChoiceMade: function(handler) {
        this.addEventListener('metrics-choice-made', (event) => { handler(event.detail); });
      },
      // Private methods
      handleBack_: function() {
        history.back();
      },
      handleOptIn_: function() {
        this.fireMetricsChoiceMade_(true);
        this.fireDone_();
      },
      handleOptOut_: function() {
        this.fireMetricsChoiceMade_(false);
        this.fireDone_();
      },
      fireMetricsChoiceMade_: function(optIn) {
        this.fire('metrics-choice-made', optIn);
      },
      fireDone_: function() {
        this.fire('done');
      }
    });
  </script>
</polymer-element>